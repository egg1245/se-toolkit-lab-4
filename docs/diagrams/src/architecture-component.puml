@startuml Component Diagram
!theme plain

title Uber Application Component Diagram

package "Uber Application" {
  [Mobile App] as mobile
  [Web App] as web
  
  package "API Layer" {
    [API Gateway] as gateway
  }
  
  package "Business Services" {
    [User Service] as user_svc
    [Payment Service] as payment_svc
    [Driver Service] as driver_svc
    [Notification Service] as notification_svc
  }
  
  package "Data Layer" {
    [Database (PostgreSQL)] as db
    [Cache (Redis)] as cache
  }
  
  queue "Message Queue (Kafka)" as queue
  
  ' Interface Components
  () "HTTP/HTTPS" as http_interface
  () "CRUD" as crud_api
  () "Read/Write" as cache_api
  () "Publish/Pull Events" as event_api

  () "REST API" as user_svc_rest_api
  () "REST API" as payment_svc_rest_api
  () "REST API" as driver_svc_rest_api
  () "REST API" as notification_svc_rest_api
  
  () "Payment Processing" as payment_api
  
  
  ' Client to API Gateway
  mobile -down-( http_interface
  web -down-( http_interface
  http_interface -down- gateway

}

package "External Systems" {
  [External Payment Gateway (Stripe)] as ext_payment
}


' API Gateway to Business Services
gateway -down-( user_svc_rest_api
gateway -down-( payment_svc_rest_api
gateway -down-( driver_svc_rest_api
gateway -down-( notification_svc_rest_api

user_svc_rest_api -down- user_svc
payment_svc_rest_api -down- payment_svc
driver_svc_rest_api -down- driver_svc
notification_svc_rest_api -down- notification_svc

db -up- crud_api
cache -up- cache_api
queue -up- event_api

' Business Services to Data Layer
user_svc -down-( crud_api
payment_svc -down-( crud_api
driver_svc -down-( crud_api
notification_svc -down-( crud_api

user_svc -down-( cache_api
payment_svc -down-( cache_api
driver_svc -down-( cache_api
notification_svc -down-( cache_api

' Business Services to Message Queue
user_svc -down-( event_api
payment_svc -down-( event_api
driver_svc -down-( event_api
notification_svc -down-( event_api

' Payment Service to External Payment Gateway
payment_svc -down-( payment_api
payment_api -down- ext_payment

@enduml